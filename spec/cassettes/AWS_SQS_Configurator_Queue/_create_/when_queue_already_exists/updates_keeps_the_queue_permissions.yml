---
http_interactions:
- request:
    method: post
    uri: "<AWS_SQS_ENDPOINT>/"
    body:
      encoding: UTF-8
      string: Action=CreateQueue&QueueName=system_name_production_product_updater_queue&Version=2012-11-05
    headers:
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby3/3.169.0 ruby/2.7.5 x86_64-linux aws-sdk-sqs/1.34.0
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Host:
      - localstack:4566
      X-Amz-Date:
      - 20230128T211315Z
      X-Amz-Content-Sha256:
      - 280b33b58c3409d0b156c0f2fca8bc2a98ea47605f1ffa6f7a3c319564c01b08
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20230128/us-east-1/sqs/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=7022d0b253bb883fff65fc404a144ee8f63b56e9af35c15c10cceb175c1347f6
      Content-Length:
      - '92'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: ''
    headers:
      Content-Type:
      - text/xml
      Content-Length:
      - '407'
      Connection:
      - close
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Allow-Methods:
      - HEAD,GET,PUT,POST,DELETE,OPTIONS,PATCH
      Access-Control-Allow-Headers:
      - authorization,cache-control,content-length,content-md5,content-type,etag,location,x-amz-acl,x-amz-content-sha256,x-amz-date,x-amz-request-id,x-amz-security-token,x-amz-tagging,x-amz-target,x-amz-user-agent,x-amz-version-id,x-amzn-requestid,x-localstack-target,amz-sdk-invocation-id,amz-sdk-request
      Access-Control-Expose-Headers:
      - etag,x-amz-version-id
      Date:
      - Sat, 28 Jan 2023 21:13:15 GMT
      Server:
      - hypercorn-h11
    body:
      encoding: UTF-8
      string: |-
        <?xml version='1.0' encoding='utf-8'?>
        <CreateQueueResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><CreateQueueResult><QueueUrl>http://queue.localhost.localstack.cloud:4566/<AWS_ACCOUNT_ID>/system_name_production_product_updater_queue</QueueUrl></CreateQueueResult><ResponseMetadata><RequestId>HFR560HDPKB4XHFFH0XYHCRXCDT83ZK6CN4Y1IO67QZ7K793T1TU</RequestId></ResponseMetadata></CreateQueueResponse>
  recorded_at: Sat, 28 Jan 2023 21:13:15 GMT
- request:
    method: post
    uri: "<AWS_SQS_ENDPOINT>/"
    body:
      encoding: UTF-8
      string: Action=GetTopicAttributes&TopicArn=arn%3Aaws%3Asns%3Aus-east-1%3A<AWS_ACCOUNT_ID>%3Aexisting_topic_product&Version=2010-03-31
    headers:
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby3/3.169.0 ruby/2.7.5 x86_64-linux aws-sdk-sns/1.58.0
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Host:
      - localstack:4566
      X-Amz-Date:
      - 20230128T211315Z
      X-Amz-Content-Sha256:
      - a9959de4d9f38ff90146d32609cce47799f2dcf1da30ed7f1e130121f8ba5cc8
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20230128/us-east-1/sns/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=4edb43b8f4ed36ed63c669ea54b07b30ff023340df4e2ca3a5ab93ae3a4609d1
      Content-Length:
      - '121'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: ''
    headers:
      Content-Type:
      - text/xml
      Content-Length:
      - '1631'
      Connection:
      - close
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Allow-Methods:
      - HEAD,GET,PUT,POST,DELETE,OPTIONS,PATCH
      Access-Control-Allow-Headers:
      - authorization,cache-control,content-length,content-md5,content-type,etag,location,x-amz-acl,x-amz-content-sha256,x-amz-date,x-amz-request-id,x-amz-security-token,x-amz-tagging,x-amz-target,x-amz-user-agent,x-amz-version-id,x-amzn-requestid,x-localstack-target,amz-sdk-invocation-id,amz-sdk-request
      Access-Control-Expose-Headers:
      - etag,x-amz-version-id
      Date:
      - Sat, 28 Jan 2023 21:13:15 GMT
      Server:
      - hypercorn-h11
    body:
      encoding: UTF-8
      string: |-
        <?xml version='1.0' encoding='utf-8'?>
        <GetTopicAttributesResponse xmlns="http://sns.amazonaws.com/doc/2010-03-31/"><GetTopicAttributesResult><Attributes><entry><key>Owner</key><value><AWS_ACCOUNT_ID></value></entry><entry><key>Policy</key><value>{"Version":"2008-10-17","Id":"__default_policy_ID","Statement":[{"Effect":"Allow","Sid":"__default_statement_ID","Principal":{"AWS":"*"},"Action":["SNS:GetTopicAttributes","SNS:SetTopicAttributes","SNS:AddPermission","SNS:RemovePermission","SNS:DeleteTopic","SNS:Subscribe","SNS:ListSubscriptionsByTopic","SNS:Publish","SNS:Receive"],"Resource":"arn:aws:sns:us-east-1:<AWS_ACCOUNT_ID>:existing_topic_product","Condition":{"StringEquals":{"AWS:SourceOwner":"<AWS_ACCOUNT_ID>"}}}]}</value></entry><entry><key>TopicArn</key><value>arn:aws:sns:us-east-1:<AWS_ACCOUNT_ID>:existing_topic_product</value></entry><entry><key>DisplayName</key><value /></entry><entry><key>SubscriptionsPending</key><value>0</value></entry><entry><key>SubscriptionsConfirmed</key><value>0</value></entry><entry><key>SubscriptionsDeleted</key><value>0</value></entry><entry><key>DeliveryPolicy</key><value /></entry><entry><key>EffectiveDeliveryPolicy</key><value>{"defaultHealthyRetryPolicy": {"numNoDelayRetries": 0, "numMinDelayRetries": 0, "minDelayTarget": 20, "maxDelayTarget": 20, "numMaxDelayRetries": 0, "numRetries": 3, "backoffFunction": "linear"}, "sicklyRetryPolicy": null, "throttlePolicy": null, "guaranteed": false}</value></entry></Attributes></GetTopicAttributesResult><ResponseMetadata><RequestId>EZCRWVJXKHIM3JC3VGU2W4SZIZ0VQQLLHUG7D9NNTN6A5JHHCUCN</RequestId></ResponseMetadata></GetTopicAttributesResponse>
  recorded_at: Sat, 28 Jan 2023 21:13:15 GMT
- request:
    method: post
    uri: "<AWS_SQS_ENDPOINT>/"
    body:
      encoding: UTF-8
      string: Action=Subscribe&Endpoint=arn%3Aaws%3Asqs%3Aus-east-1%3A<AWS_ACCOUNT_ID>%3Asystem_name_production_product_updater_queue&Protocol=sqs&TopicArn=arn%3Aaws%3Asns%3Aus-east-1%3A<AWS_ACCOUNT_ID>%3Aexisting_topic_product&Version=2010-03-31
    headers:
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby3/3.169.0 ruby/2.7.5 x86_64-linux aws-sdk-sns/1.58.0
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Host:
      - localstack:4566
      X-Amz-Date:
      - 20230128T211315Z
      X-Amz-Content-Sha256:
      - cb3ca8c9f22e19000cf14f504242aa04cc9e6f93cb4f6dc6762c5865958ac69b
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20230128/us-east-1/sns/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=ab6beb147d0d702ef76dc8a9de0f37e90432cd873ad114f454bba4038ded6b86
      Content-Length:
      - '224'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: ''
    headers:
      Content-Type:
      - text/xml
      Content-Length:
      - '403'
      Connection:
      - close
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Allow-Methods:
      - HEAD,GET,PUT,POST,DELETE,OPTIONS,PATCH
      Access-Control-Allow-Headers:
      - authorization,cache-control,content-length,content-md5,content-type,etag,location,x-amz-acl,x-amz-content-sha256,x-amz-date,x-amz-request-id,x-amz-security-token,x-amz-tagging,x-amz-target,x-amz-user-agent,x-amz-version-id,x-amzn-requestid,x-localstack-target,amz-sdk-invocation-id,amz-sdk-request
      Access-Control-Expose-Headers:
      - etag,x-amz-version-id
      Date:
      - Sat, 28 Jan 2023 21:13:15 GMT
      Server:
      - hypercorn-h11
    body:
      encoding: UTF-8
      string: |-
        <?xml version='1.0' encoding='utf-8'?>
        <SubscribeResponse xmlns="http://sns.amazonaws.com/doc/2010-03-31/"><SubscribeResult><SubscriptionArn>arn:aws:sns:us-east-1:<AWS_ACCOUNT_ID>:existing_topic_product:ea1c6dfd-662a-4482-a782-6657683c3140</SubscriptionArn></SubscribeResult><ResponseMetadata><RequestId>WTZ14HKR5U29SJGRY3GI2M39HW7J576V58OWY776WY4MDXQGS54N</RequestId></ResponseMetadata></SubscribeResponse>
  recorded_at: Sat, 28 Jan 2023 21:13:15 GMT
- request:
    method: post
    uri: "<AWS_SQS_ENDPOINT>/"
    body:
      encoding: UTF-8
      string: Action=SetSubscriptionAttributes&AttributeName=RawMessageDelivery&AttributeValue=true&SubscriptionArn=arn%3Aaws%3Asns%3Aus-east-1%3A<AWS_ACCOUNT_ID>%3Aexisting_topic_product%3Aea1c6dfd-662a-4482-a782-6657683c3140&Version=2010-03-31
    headers:
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby3/3.169.0 ruby/2.7.5 x86_64-linux aws-sdk-sns/1.58.0
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Host:
      - localstack:4566
      X-Amz-Date:
      - 20230128T211315Z
      X-Amz-Content-Sha256:
      - afb22f3e2d9249ae7c97a3792d5a7b9def65a8422bc3c755cbdbb66fcee9f545
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20230128/us-east-1/sns/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=32cc2c1b7a20d5ec1e5d924aeb26a37f2dbb430f2d6e491214778a3398b02d1e
      Content-Length:
      - '227'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: ''
    headers:
      Content-Type:
      - text/xml
      Content-Length:
      - '271'
      Connection:
      - close
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Allow-Methods:
      - HEAD,GET,PUT,POST,DELETE,OPTIONS,PATCH
      Access-Control-Allow-Headers:
      - authorization,cache-control,content-length,content-md5,content-type,etag,location,x-amz-acl,x-amz-content-sha256,x-amz-date,x-amz-request-id,x-amz-security-token,x-amz-tagging,x-amz-target,x-amz-user-agent,x-amz-version-id,x-amzn-requestid,x-localstack-target,amz-sdk-invocation-id,amz-sdk-request
      Access-Control-Expose-Headers:
      - etag,x-amz-version-id
      Date:
      - Sat, 28 Jan 2023 21:13:15 GMT
      Server:
      - hypercorn-h11
    body:
      encoding: UTF-8
      string: |-
        <?xml version='1.0' encoding='utf-8'?>
        <SetSubscriptionAttributesResponse xmlns="http://sns.amazonaws.com/doc/2010-03-31/"><ResponseMetadata><RequestId>YZU8BGOVTUBOCHFY88JUERG9XNNXQQ9VES2TEOPMFDBPRXYAEH3M</RequestId></ResponseMetadata></SetSubscriptionAttributesResponse>
  recorded_at: Sat, 28 Jan 2023 21:13:15 GMT
- request:
    method: post
    uri: "<AWS_SQS_ENDPOINT>/<AWS_ACCOUNT_ID>/system_name_production_product_updater_queue"
    body:
      encoding: UTF-8
      string: Action=GetQueueAttributes&AttributeName.1=Policy&QueueUrl=http%3A%2F%2Flocalstack%3A4566%2F<AWS_ACCOUNT_ID>%2Fsystem_name_production_product_updater_queue&Version=2012-11-05
    headers:
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby3/3.169.0 ruby/2.7.5 x86_64-linux aws-sdk-sqs/1.34.0
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Host:
      - localstack:4566
      X-Amz-Date:
      - 20230128T211315Z
      X-Amz-Content-Sha256:
      - 61ffa67ac402e5365828fafa0d1e133584ce50019a01a38fdd7e36793eaea6ea
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20230128/us-east-1/sqs/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=8907933bec4b36caa81ed3866f785c97a1076f4d319abde63772be1b47c50c21
      Content-Length:
      - '169'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: ''
    headers:
      Content-Type:
      - text/xml
      Content-Length:
      - '1075'
      Connection:
      - close
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Allow-Methods:
      - HEAD,GET,PUT,POST,DELETE,OPTIONS,PATCH
      Access-Control-Allow-Headers:
      - authorization,cache-control,content-length,content-md5,content-type,etag,location,x-amz-acl,x-amz-content-sha256,x-amz-date,x-amz-request-id,x-amz-security-token,x-amz-tagging,x-amz-target,x-amz-user-agent,x-amz-version-id,x-amzn-requestid,x-localstack-target,amz-sdk-invocation-id,amz-sdk-request
      Access-Control-Expose-Headers:
      - etag,x-amz-version-id
      Date:
      - Sat, 28 Jan 2023 21:13:15 GMT
      Server:
      - hypercorn-h11
    body:
      encoding: UTF-8
      string: |-
        <?xml version='1.0' encoding='utf-8'?>
        <GetQueueAttributesResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><GetQueueAttributesResult><Attribute><Name>Policy</Name><Value>{&quot;Version&quot;:&quot;2012-10-17&quot;,&quot;Id&quot;:&quot;arn:aws:sqs:us-east-1:<AWS_ACCOUNT_ID>:system_name_production_product_updater_queue/SQSDefaultPolicy&quot;,&quot;Statement&quot;:[{&quot;Sid&quot;:&quot;subscription_in_new_product&quot;,&quot;Effect&quot;:&quot;Allow&quot;,&quot;Principal&quot;:{&quot;AWS&quot;:&quot;*&quot;},&quot;Action&quot;:&quot;SQS:SendMessage&quot;,&quot;Resource&quot;:[&quot;arn:aws:sqs:us-east-1:<AWS_ACCOUNT_ID>:system_name_production_product_updater_queue&quot;],&quot;Condition&quot;:{&quot;ArnLike&quot;:{&quot;aws:SourceArn&quot;:[&quot;arn:aws:sns:us-east-1:<AWS_ACCOUNT_ID>:new_product&quot;,&quot;arn:aws:sns:us-east-1:<AWS_ACCOUNT_ID>:existing_topic_product&quot;]}}}]}</Value></Attribute></GetQueueAttributesResult><ResponseMetadata><RequestId>7XRVLTJAH4FJD5N9ASWPSIZU60RVQV6UETDVB11CQHMD2GN13IYO</RequestId></ResponseMetadata></GetQueueAttributesResponse>
  recorded_at: Sat, 28 Jan 2023 21:13:15 GMT
- request:
    method: post
    uri: "<AWS_SQS_ENDPOINT>/<AWS_ACCOUNT_ID>/system_name_production_product_updater_queue"
    body:
      encoding: UTF-8
      string: Action=SetQueueAttributes&Attribute.1.Name=Policy&Attribute.1.Value=%7B%22Version%22%3A%222012-10-17%22%2C%22Id%22%3A%22arn%3Aaws%3Asqs%3Aus-east-1%3A<AWS_ACCOUNT_ID>%3Asystem_name_production_product_updater_queue%2FSQSDefaultPolicy%22%2C%22Statement%22%3A%5B%7B%22Sid%22%3A%22subscription_in_existing_topic_product%22%2C%22Effect%22%3A%22Allow%22%2C%22Principal%22%3A%7B%22AWS%22%3A%22%2A%22%7D%2C%22Action%22%3A%22SQS%3ASendMessage%22%2C%22Resource%22%3A%5B%22arn%3Aaws%3Asqs%3Aus-east-1%3A<AWS_ACCOUNT_ID>%3Asystem_name_production_product_updater_queue%22%5D%2C%22Condition%22%3A%7B%22ArnLike%22%3A%7B%22aws%3ASourceArn%22%3A%5B%22arn%3Aaws%3Asns%3Aus-east-1%3A<AWS_ACCOUNT_ID>%3Aexisting_topic_product%22%2C%22arn%3Aaws%3Asns%3Aus-east-1%3A<AWS_ACCOUNT_ID>%3Anew_product%22%5D%7D%7D%7D%5D%7D&QueueUrl=http%3A%2F%2Flocalstack%3A4566%2F<AWS_ACCOUNT_ID>%2Fsystem_name_production_product_updater_queue&Version=2012-11-05
    headers:
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby3/3.169.0 ruby/2.7.5 x86_64-linux aws-sdk-sqs/1.34.0
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Host:
      - localstack:4566
      X-Amz-Date:
      - 20230128T211315Z
      X-Amz-Content-Sha256:
      - dc622a304e894e36fe9f82f0e0b06de105229437271f50fd110f1a096c634cfb
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20230128/us-east-1/sqs/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=e2437ad4a01558e7c4f8fbb2848fe6b10fcf4b9c6f36a74f6fba3575189130b1
      Content-Length:
      - '900'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: ''
    headers:
      Content-Type:
      - text/xml
      Content-Length:
      - '259'
      Connection:
      - close
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Allow-Methods:
      - HEAD,GET,PUT,POST,DELETE,OPTIONS,PATCH
      Access-Control-Allow-Headers:
      - authorization,cache-control,content-length,content-md5,content-type,etag,location,x-amz-acl,x-amz-content-sha256,x-amz-date,x-amz-request-id,x-amz-security-token,x-amz-tagging,x-amz-target,x-amz-user-agent,x-amz-version-id,x-amzn-requestid,x-localstack-target,amz-sdk-invocation-id,amz-sdk-request
      Access-Control-Expose-Headers:
      - etag,x-amz-version-id
      Date:
      - Sat, 28 Jan 2023 21:13:15 GMT
      Server:
      - hypercorn-h11
    body:
      encoding: UTF-8
      string: |-
        <?xml version='1.0' encoding='utf-8'?>
        <SetQueueAttributesResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><ResponseMetadata><RequestId>0K07OY3VQV9T1DQNBBKUR0MX0JR4N1I27WFNPFSS712X0VH5L2XN</RequestId></ResponseMetadata></SetQueueAttributesResponse>
  recorded_at: Sat, 28 Jan 2023 21:13:15 GMT
- request:
    method: post
    uri: http://queue.localhost.localstack.cloud:4566/<AWS_ACCOUNT_ID>/system_name_production_product_updater_queue
    body:
      encoding: UTF-8
      string: Action=SetQueueAttributes&Attribute.1.Name=VisibilityTimeout&Attribute.1.Value=40&Attribute.2.Name=MessageRetentionPeriod&Attribute.2.Value=1000000&Attribute.3.Name=RedrivePolicy&Attribute.3.Value=%7B%22maxReceiveCount%22%3A%228%22%2C%22deadLetterTargetArn%22%3A%22arn%3Aaws%3Asqs%3Aus-east-1%3A<AWS_ACCOUNT_ID>%3Asystem_name_production_product_updater_queue_errors%22%7D&QueueUrl=http%3A%2F%2Fqueue.localhost.localstack.cloud%3A4566%2F<AWS_ACCOUNT_ID>%2Fsystem_name_production_product_updater_queue&Version=2012-11-05
    headers:
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby3/3.169.0 ruby/2.7.5 x86_64-linux aws-sdk-sqs/1.34.0
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Host:
      - queue.localhost.localstack.cloud:4566
      X-Amz-Date:
      - 20230128T211315Z
      X-Amz-Content-Sha256:
      - 9fef06481e043459301a74830cbda38cbfca80e0c3434e55579e03697f1d51db
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20230128/us-east-1/sqs/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=a99958994bc09e2718900a834a8be85d3f06598f7280a42740399eefc2891849
      Content-Length:
      - '510'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: ''
    headers:
      Content-Type:
      - text/xml
      Content-Length:
      - '259'
      Connection:
      - close
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Allow-Methods:
      - HEAD,GET,PUT,POST,DELETE,OPTIONS,PATCH
      Access-Control-Allow-Headers:
      - authorization,cache-control,content-length,content-md5,content-type,etag,location,x-amz-acl,x-amz-content-sha256,x-amz-date,x-amz-request-id,x-amz-security-token,x-amz-tagging,x-amz-target,x-amz-user-agent,x-amz-version-id,x-amzn-requestid,x-localstack-target,amz-sdk-invocation-id,amz-sdk-request
      Access-Control-Expose-Headers:
      - etag,x-amz-version-id
      Date:
      - Sat, 28 Jan 2023 21:13:15 GMT
      Server:
      - hypercorn-h11
    body:
      encoding: UTF-8
      string: |-
        <?xml version='1.0' encoding='utf-8'?>
        <SetQueueAttributesResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><ResponseMetadata><RequestId>63YPUJP8MJO8OQKMKBY2ZVV89K9ZMT8LGKTTHHA7FS2G06FSKANK</RequestId></ResponseMetadata></SetQueueAttributesResponse>
  recorded_at: Sat, 28 Jan 2023 21:13:15 GMT
- request:
    method: post
    uri: "<AWS_SQS_ENDPOINT>/"
    body:
      encoding: UTF-8
      string: Action=CreateQueue&QueueName=system_name_production_product_updater_queue&Version=2012-11-05
    headers:
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby3/3.169.0 ruby/2.7.5 x86_64-linux aws-sdk-sqs/1.34.0
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Host:
      - localstack:4566
      X-Amz-Date:
      - 20230128T211315Z
      X-Amz-Content-Sha256:
      - 280b33b58c3409d0b156c0f2fca8bc2a98ea47605f1ffa6f7a3c319564c01b08
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20230128/us-east-1/sqs/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=7022d0b253bb883fff65fc404a144ee8f63b56e9af35c15c10cceb175c1347f6
      Content-Length:
      - '92'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: ''
    headers:
      Content-Type:
      - text/xml
      Content-Length:
      - '407'
      Connection:
      - close
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Allow-Methods:
      - HEAD,GET,PUT,POST,DELETE,OPTIONS,PATCH
      Access-Control-Allow-Headers:
      - authorization,cache-control,content-length,content-md5,content-type,etag,location,x-amz-acl,x-amz-content-sha256,x-amz-date,x-amz-request-id,x-amz-security-token,x-amz-tagging,x-amz-target,x-amz-user-agent,x-amz-version-id,x-amzn-requestid,x-localstack-target,amz-sdk-invocation-id,amz-sdk-request
      Access-Control-Expose-Headers:
      - etag,x-amz-version-id
      Date:
      - Sat, 28 Jan 2023 21:13:15 GMT
      Server:
      - hypercorn-h11
    body:
      encoding: UTF-8
      string: |-
        <?xml version='1.0' encoding='utf-8'?>
        <CreateQueueResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><CreateQueueResult><QueueUrl>http://queue.localhost.localstack.cloud:4566/<AWS_ACCOUNT_ID>/system_name_production_product_updater_queue</QueueUrl></CreateQueueResult><ResponseMetadata><RequestId>FK9O0U1JZFT6XP9C9LX4HWPGHF1H5KXK4HSXS88AGB556KILAVTO</RequestId></ResponseMetadata></CreateQueueResponse>
  recorded_at: Sat, 28 Jan 2023 21:13:15 GMT
- request:
    method: post
    uri: "<AWS_SQS_ENDPOINT>/"
    body:
      encoding: UTF-8
      string: Action=GetTopicAttributes&TopicArn=arn%3Aaws%3Asns%3Aus-east-1%3A<AWS_ACCOUNT_ID>%3Anew_product&Version=2010-03-31
    headers:
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby3/3.169.0 ruby/2.7.5 x86_64-linux aws-sdk-sns/1.58.0
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Host:
      - localstack:4566
      X-Amz-Date:
      - 20230128T211315Z
      X-Amz-Content-Sha256:
      - 51bd609786ee648c2b85b6128eb110a21ed4b66036679d7949e17fb892f9c2fc
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20230128/us-east-1/sns/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=fe9d62668e87b7e238e06d52797ddd17d9dfdc48dcfa4e5bc38f177c00f28fe1
      Content-Length:
      - '110'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: ''
    headers:
      Content-Type:
      - text/xml
      Content-Length:
      - '1609'
      Connection:
      - close
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Allow-Methods:
      - HEAD,GET,PUT,POST,DELETE,OPTIONS,PATCH
      Access-Control-Allow-Headers:
      - authorization,cache-control,content-length,content-md5,content-type,etag,location,x-amz-acl,x-amz-content-sha256,x-amz-date,x-amz-request-id,x-amz-security-token,x-amz-tagging,x-amz-target,x-amz-user-agent,x-amz-version-id,x-amzn-requestid,x-localstack-target,amz-sdk-invocation-id,amz-sdk-request
      Access-Control-Expose-Headers:
      - etag,x-amz-version-id
      Date:
      - Sat, 28 Jan 2023 21:13:15 GMT
      Server:
      - hypercorn-h11
    body:
      encoding: UTF-8
      string: |-
        <?xml version='1.0' encoding='utf-8'?>
        <GetTopicAttributesResponse xmlns="http://sns.amazonaws.com/doc/2010-03-31/"><GetTopicAttributesResult><Attributes><entry><key>Owner</key><value><AWS_ACCOUNT_ID></value></entry><entry><key>Policy</key><value>{"Version":"2008-10-17","Id":"__default_policy_ID","Statement":[{"Effect":"Allow","Sid":"__default_statement_ID","Principal":{"AWS":"*"},"Action":["SNS:GetTopicAttributes","SNS:SetTopicAttributes","SNS:AddPermission","SNS:RemovePermission","SNS:DeleteTopic","SNS:Subscribe","SNS:ListSubscriptionsByTopic","SNS:Publish","SNS:Receive"],"Resource":"arn:aws:sns:us-east-1:<AWS_ACCOUNT_ID>:new_product","Condition":{"StringEquals":{"AWS:SourceOwner":"<AWS_ACCOUNT_ID>"}}}]}</value></entry><entry><key>TopicArn</key><value>arn:aws:sns:us-east-1:<AWS_ACCOUNT_ID>:new_product</value></entry><entry><key>DisplayName</key><value /></entry><entry><key>SubscriptionsPending</key><value>0</value></entry><entry><key>SubscriptionsConfirmed</key><value>0</value></entry><entry><key>SubscriptionsDeleted</key><value>0</value></entry><entry><key>DeliveryPolicy</key><value /></entry><entry><key>EffectiveDeliveryPolicy</key><value>{"defaultHealthyRetryPolicy": {"numNoDelayRetries": 0, "numMinDelayRetries": 0, "minDelayTarget": 20, "maxDelayTarget": 20, "numMaxDelayRetries": 0, "numRetries": 3, "backoffFunction": "linear"}, "sicklyRetryPolicy": null, "throttlePolicy": null, "guaranteed": false}</value></entry></Attributes></GetTopicAttributesResult><ResponseMetadata><RequestId>5MDHIN2T0X0R09BXWU4N5X4LYRVO7LGY9IIO0WAXS43HCEUI8VTU</RequestId></ResponseMetadata></GetTopicAttributesResponse>
  recorded_at: Sat, 28 Jan 2023 21:13:15 GMT
- request:
    method: post
    uri: "<AWS_SQS_ENDPOINT>/"
    body:
      encoding: UTF-8
      string: Action=Subscribe&Endpoint=arn%3Aaws%3Asqs%3Aus-east-1%3A<AWS_ACCOUNT_ID>%3Asystem_name_production_product_updater_queue&Protocol=sqs&TopicArn=arn%3Aaws%3Asns%3Aus-east-1%3A<AWS_ACCOUNT_ID>%3Anew_product&Version=2010-03-31
    headers:
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby3/3.169.0 ruby/2.7.5 x86_64-linux aws-sdk-sns/1.58.0
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Host:
      - localstack:4566
      X-Amz-Date:
      - 20230128T211315Z
      X-Amz-Content-Sha256:
      - 637272c77b1f6ad19853a49eb86cf3a8df44767d5093eff12fa76ad06bba3912
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20230128/us-east-1/sns/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=e1be82bf9dac72a381cf8425fed4a88bddef8533acb1bedf84c31c1c8752159b
      Content-Length:
      - '213'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: ''
    headers:
      Content-Type:
      - text/xml
      Content-Length:
      - '392'
      Connection:
      - close
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Allow-Methods:
      - HEAD,GET,PUT,POST,DELETE,OPTIONS,PATCH
      Access-Control-Allow-Headers:
      - authorization,cache-control,content-length,content-md5,content-type,etag,location,x-amz-acl,x-amz-content-sha256,x-amz-date,x-amz-request-id,x-amz-security-token,x-amz-tagging,x-amz-target,x-amz-user-agent,x-amz-version-id,x-amzn-requestid,x-localstack-target,amz-sdk-invocation-id,amz-sdk-request
      Access-Control-Expose-Headers:
      - etag,x-amz-version-id
      Date:
      - Sat, 28 Jan 2023 21:13:15 GMT
      Server:
      - hypercorn-h11
    body:
      encoding: UTF-8
      string: |-
        <?xml version='1.0' encoding='utf-8'?>
        <SubscribeResponse xmlns="http://sns.amazonaws.com/doc/2010-03-31/"><SubscribeResult><SubscriptionArn>arn:aws:sns:us-east-1:<AWS_ACCOUNT_ID>:new_product:f0f61d6c-bcf2-420a-8a56-3fb3a0d6fb50</SubscriptionArn></SubscribeResult><ResponseMetadata><RequestId>CMGB0VP1LUKTGAUD31M41I31T02HIQAHOLBG434IDZJV2S0WWLK8</RequestId></ResponseMetadata></SubscribeResponse>
  recorded_at: Sat, 28 Jan 2023 21:13:15 GMT
- request:
    method: post
    uri: "<AWS_SQS_ENDPOINT>/"
    body:
      encoding: UTF-8
      string: Action=SetSubscriptionAttributes&AttributeName=RawMessageDelivery&AttributeValue=true&SubscriptionArn=arn%3Aaws%3Asns%3Aus-east-1%3A<AWS_ACCOUNT_ID>%3Anew_product%3Af0f61d6c-bcf2-420a-8a56-3fb3a0d6fb50&Version=2010-03-31
    headers:
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby3/3.169.0 ruby/2.7.5 x86_64-linux aws-sdk-sns/1.58.0
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Host:
      - localstack:4566
      X-Amz-Date:
      - 20230128T211315Z
      X-Amz-Content-Sha256:
      - 2c51c3a7eec969f66c4405def5c32cbfa5519de56a3cfdd601fd12adcab26245
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20230128/us-east-1/sns/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=a9ccc411d0d10a78570d68a74a96586638eb24e9b6b3e014bace96dd435fced1
      Content-Length:
      - '216'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: ''
    headers:
      Content-Type:
      - text/xml
      Content-Length:
      - '271'
      Connection:
      - close
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Allow-Methods:
      - HEAD,GET,PUT,POST,DELETE,OPTIONS,PATCH
      Access-Control-Allow-Headers:
      - authorization,cache-control,content-length,content-md5,content-type,etag,location,x-amz-acl,x-amz-content-sha256,x-amz-date,x-amz-request-id,x-amz-security-token,x-amz-tagging,x-amz-target,x-amz-user-agent,x-amz-version-id,x-amzn-requestid,x-localstack-target,amz-sdk-invocation-id,amz-sdk-request
      Access-Control-Expose-Headers:
      - etag,x-amz-version-id
      Date:
      - Sat, 28 Jan 2023 21:13:15 GMT
      Server:
      - hypercorn-h11
    body:
      encoding: UTF-8
      string: |-
        <?xml version='1.0' encoding='utf-8'?>
        <SetSubscriptionAttributesResponse xmlns="http://sns.amazonaws.com/doc/2010-03-31/"><ResponseMetadata><RequestId>LNKCUNX03KJJVUUIIKJ8ISBEF106IY2UU0GKRDWR4F421X8QGLBX</RequestId></ResponseMetadata></SetSubscriptionAttributesResponse>
  recorded_at: Sat, 28 Jan 2023 21:13:15 GMT
- request:
    method: post
    uri: "<AWS_SQS_ENDPOINT>/<AWS_ACCOUNT_ID>/system_name_production_product_updater_queue"
    body:
      encoding: UTF-8
      string: Action=GetQueueAttributes&AttributeName.1=Policy&QueueUrl=http%3A%2F%2Flocalstack%3A4566%2F<AWS_ACCOUNT_ID>%2Fsystem_name_production_product_updater_queue&Version=2012-11-05
    headers:
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby3/3.169.0 ruby/2.7.5 x86_64-linux aws-sdk-sqs/1.34.0
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Host:
      - localstack:4566
      X-Amz-Date:
      - 20230128T211315Z
      X-Amz-Content-Sha256:
      - 61ffa67ac402e5365828fafa0d1e133584ce50019a01a38fdd7e36793eaea6ea
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20230128/us-east-1/sqs/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=8907933bec4b36caa81ed3866f785c97a1076f4d319abde63772be1b47c50c21
      Content-Length:
      - '169'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: ''
    headers:
      Content-Type:
      - text/xml
      Content-Length:
      - '1086'
      Connection:
      - close
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Allow-Methods:
      - HEAD,GET,PUT,POST,DELETE,OPTIONS,PATCH
      Access-Control-Allow-Headers:
      - authorization,cache-control,content-length,content-md5,content-type,etag,location,x-amz-acl,x-amz-content-sha256,x-amz-date,x-amz-request-id,x-amz-security-token,x-amz-tagging,x-amz-target,x-amz-user-agent,x-amz-version-id,x-amzn-requestid,x-localstack-target,amz-sdk-invocation-id,amz-sdk-request
      Access-Control-Expose-Headers:
      - etag,x-amz-version-id
      Date:
      - Sat, 28 Jan 2023 21:13:15 GMT
      Server:
      - hypercorn-h11
    body:
      encoding: UTF-8
      string: |-
        <?xml version='1.0' encoding='utf-8'?>
        <GetQueueAttributesResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><GetQueueAttributesResult><Attribute><Name>Policy</Name><Value>{&quot;Version&quot;:&quot;2012-10-17&quot;,&quot;Id&quot;:&quot;arn:aws:sqs:us-east-1:<AWS_ACCOUNT_ID>:system_name_production_product_updater_queue/SQSDefaultPolicy&quot;,&quot;Statement&quot;:[{&quot;Sid&quot;:&quot;subscription_in_existing_topic_product&quot;,&quot;Effect&quot;:&quot;Allow&quot;,&quot;Principal&quot;:{&quot;AWS&quot;:&quot;*&quot;},&quot;Action&quot;:&quot;SQS:SendMessage&quot;,&quot;Resource&quot;:[&quot;arn:aws:sqs:us-east-1:<AWS_ACCOUNT_ID>:system_name_production_product_updater_queue&quot;],&quot;Condition&quot;:{&quot;ArnLike&quot;:{&quot;aws:SourceArn&quot;:[&quot;arn:aws:sns:us-east-1:<AWS_ACCOUNT_ID>:existing_topic_product&quot;,&quot;arn:aws:sns:us-east-1:<AWS_ACCOUNT_ID>:new_product&quot;]}}}]}</Value></Attribute></GetQueueAttributesResult><ResponseMetadata><RequestId>35EJ45EU4PH5J62C87OSNFTDCOR2R0TWUWHAZ7WW3KTWY5AOZ1FA</RequestId></ResponseMetadata></GetQueueAttributesResponse>
  recorded_at: Sat, 28 Jan 2023 21:13:15 GMT
- request:
    method: post
    uri: "<AWS_SQS_ENDPOINT>/<AWS_ACCOUNT_ID>/system_name_production_product_updater_queue"
    body:
      encoding: UTF-8
      string: Action=SetQueueAttributes&Attribute.1.Name=Policy&Attribute.1.Value=%7B%22Version%22%3A%222012-10-17%22%2C%22Id%22%3A%22arn%3Aaws%3Asqs%3Aus-east-1%3A<AWS_ACCOUNT_ID>%3Asystem_name_production_product_updater_queue%2FSQSDefaultPolicy%22%2C%22Statement%22%3A%5B%7B%22Sid%22%3A%22subscription_in_new_product%22%2C%22Effect%22%3A%22Allow%22%2C%22Principal%22%3A%7B%22AWS%22%3A%22%2A%22%7D%2C%22Action%22%3A%22SQS%3ASendMessage%22%2C%22Resource%22%3A%5B%22arn%3Aaws%3Asqs%3Aus-east-1%3A<AWS_ACCOUNT_ID>%3Asystem_name_production_product_updater_queue%22%5D%2C%22Condition%22%3A%7B%22ArnLike%22%3A%7B%22aws%3ASourceArn%22%3A%5B%22arn%3Aaws%3Asns%3Aus-east-1%3A<AWS_ACCOUNT_ID>%3Anew_product%22%2C%22arn%3Aaws%3Asns%3Aus-east-1%3A<AWS_ACCOUNT_ID>%3Aexisting_topic_product%22%5D%7D%7D%7D%5D%7D&QueueUrl=http%3A%2F%2Flocalstack%3A4566%2F<AWS_ACCOUNT_ID>%2Fsystem_name_production_product_updater_queue&Version=2012-11-05
    headers:
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby3/3.169.0 ruby/2.7.5 x86_64-linux aws-sdk-sqs/1.34.0
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Host:
      - localstack:4566
      X-Amz-Date:
      - 20230128T211315Z
      X-Amz-Content-Sha256:
      - 62c2dccf181728deaf30c00425a7014be27428f77530c6964a1e8624716e9f00
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20230128/us-east-1/sqs/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=943c2d45626820977fa3e5bac11190e830d0ea93fbe956f6c552215891e700f0
      Content-Length:
      - '889'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: ''
    headers:
      Content-Type:
      - text/xml
      Content-Length:
      - '259'
      Connection:
      - close
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Allow-Methods:
      - HEAD,GET,PUT,POST,DELETE,OPTIONS,PATCH
      Access-Control-Allow-Headers:
      - authorization,cache-control,content-length,content-md5,content-type,etag,location,x-amz-acl,x-amz-content-sha256,x-amz-date,x-amz-request-id,x-amz-security-token,x-amz-tagging,x-amz-target,x-amz-user-agent,x-amz-version-id,x-amzn-requestid,x-localstack-target,amz-sdk-invocation-id,amz-sdk-request
      Access-Control-Expose-Headers:
      - etag,x-amz-version-id
      Date:
      - Sat, 28 Jan 2023 21:13:15 GMT
      Server:
      - hypercorn-h11
    body:
      encoding: UTF-8
      string: |-
        <?xml version='1.0' encoding='utf-8'?>
        <SetQueueAttributesResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><ResponseMetadata><RequestId>D4CS8S90K4KBTGHJ04IKIILL9V2GPSU4NXGMWQM1UR4P5ROB6AE2</RequestId></ResponseMetadata></SetQueueAttributesResponse>
  recorded_at: Sat, 28 Jan 2023 21:13:15 GMT
- request:
    method: post
    uri: http://queue.localhost.localstack.cloud:4566/<AWS_ACCOUNT_ID>/system_name_production_product_updater_queue
    body:
      encoding: UTF-8
      string: Action=SetQueueAttributes&Attribute.1.Name=VisibilityTimeout&Attribute.1.Value=40&Attribute.2.Name=MessageRetentionPeriod&Attribute.2.Value=1000000&Attribute.3.Name=RedrivePolicy&Attribute.3.Value=%7B%22maxReceiveCount%22%3A%228%22%2C%22deadLetterTargetArn%22%3A%22arn%3Aaws%3Asqs%3Aus-east-1%3A<AWS_ACCOUNT_ID>%3Asystem_name_production_product_updater_queue_errors%22%7D&QueueUrl=http%3A%2F%2Fqueue.localhost.localstack.cloud%3A4566%2F<AWS_ACCOUNT_ID>%2Fsystem_name_production_product_updater_queue&Version=2012-11-05
    headers:
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby3/3.169.0 ruby/2.7.5 x86_64-linux aws-sdk-sqs/1.34.0
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Host:
      - queue.localhost.localstack.cloud:4566
      X-Amz-Date:
      - 20230128T211315Z
      X-Amz-Content-Sha256:
      - 9fef06481e043459301a74830cbda38cbfca80e0c3434e55579e03697f1d51db
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20230128/us-east-1/sqs/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=a99958994bc09e2718900a834a8be85d3f06598f7280a42740399eefc2891849
      Content-Length:
      - '510'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: ''
    headers:
      Content-Type:
      - text/xml
      Content-Length:
      - '259'
      Connection:
      - close
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Allow-Methods:
      - HEAD,GET,PUT,POST,DELETE,OPTIONS,PATCH
      Access-Control-Allow-Headers:
      - authorization,cache-control,content-length,content-md5,content-type,etag,location,x-amz-acl,x-amz-content-sha256,x-amz-date,x-amz-request-id,x-amz-security-token,x-amz-tagging,x-amz-target,x-amz-user-agent,x-amz-version-id,x-amzn-requestid,x-localstack-target,amz-sdk-invocation-id,amz-sdk-request
      Access-Control-Expose-Headers:
      - etag,x-amz-version-id
      Date:
      - Sat, 28 Jan 2023 21:13:15 GMT
      Server:
      - hypercorn-h11
    body:
      encoding: UTF-8
      string: |-
        <?xml version='1.0' encoding='utf-8'?>
        <SetQueueAttributesResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><ResponseMetadata><RequestId>AXGPZCHC3ISQH1B8LGYEKDVSGN6V1GMLMQBLYMO12AVEHBTMEGQH</RequestId></ResponseMetadata></SetQueueAttributesResponse>
  recorded_at: Sat, 28 Jan 2023 21:13:15 GMT
- request:
    method: post
    uri: "<AWS_SQS_ENDPOINT>/<AWS_ACCOUNT_ID>/system_name_production_product_updater_queue"
    body:
      encoding: UTF-8
      string: Action=GetQueueAttributes&AttributeName.1=Policy&QueueUrl=http%3A%2F%2Flocalstack%3A4566%2F<AWS_ACCOUNT_ID>%2Fsystem_name_production_product_updater_queue&Version=2012-11-05
    headers:
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby3/3.169.0 ruby/2.7.5 x86_64-linux aws-sdk-sqs/1.34.0
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Host:
      - localstack:4566
      X-Amz-Date:
      - 20230128T211315Z
      X-Amz-Content-Sha256:
      - 61ffa67ac402e5365828fafa0d1e133584ce50019a01a38fdd7e36793eaea6ea
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20230128/us-east-1/sqs/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=8907933bec4b36caa81ed3866f785c97a1076f4d319abde63772be1b47c50c21
      Content-Length:
      - '169'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: ''
    headers:
      Content-Type:
      - text/xml
      Content-Length:
      - '1075'
      Connection:
      - close
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Allow-Methods:
      - HEAD,GET,PUT,POST,DELETE,OPTIONS,PATCH
      Access-Control-Allow-Headers:
      - authorization,cache-control,content-length,content-md5,content-type,etag,location,x-amz-acl,x-amz-content-sha256,x-amz-date,x-amz-request-id,x-amz-security-token,x-amz-tagging,x-amz-target,x-amz-user-agent,x-amz-version-id,x-amzn-requestid,x-localstack-target,amz-sdk-invocation-id,amz-sdk-request
      Access-Control-Expose-Headers:
      - etag,x-amz-version-id
      Date:
      - Sat, 28 Jan 2023 21:13:15 GMT
      Server:
      - hypercorn-h11
    body:
      encoding: UTF-8
      string: |-
        <?xml version='1.0' encoding='utf-8'?>
        <GetQueueAttributesResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><GetQueueAttributesResult><Attribute><Name>Policy</Name><Value>{&quot;Version&quot;:&quot;2012-10-17&quot;,&quot;Id&quot;:&quot;arn:aws:sqs:us-east-1:<AWS_ACCOUNT_ID>:system_name_production_product_updater_queue/SQSDefaultPolicy&quot;,&quot;Statement&quot;:[{&quot;Sid&quot;:&quot;subscription_in_new_product&quot;,&quot;Effect&quot;:&quot;Allow&quot;,&quot;Principal&quot;:{&quot;AWS&quot;:&quot;*&quot;},&quot;Action&quot;:&quot;SQS:SendMessage&quot;,&quot;Resource&quot;:[&quot;arn:aws:sqs:us-east-1:<AWS_ACCOUNT_ID>:system_name_production_product_updater_queue&quot;],&quot;Condition&quot;:{&quot;ArnLike&quot;:{&quot;aws:SourceArn&quot;:[&quot;arn:aws:sns:us-east-1:<AWS_ACCOUNT_ID>:new_product&quot;,&quot;arn:aws:sns:us-east-1:<AWS_ACCOUNT_ID>:existing_topic_product&quot;]}}}]}</Value></Attribute></GetQueueAttributesResult><ResponseMetadata><RequestId>MJJ7LEL22Y660HEUBJB4ZFUTGBCMGUV55NQSF5UUS8J1CSNPJTGV</RequestId></ResponseMetadata></GetQueueAttributesResponse>
  recorded_at: Sat, 28 Jan 2023 21:13:15 GMT
recorded_with: VCR 6.0.0
